{% extends 'base.html.twig' %}

{% block title %}Modification d'un commentaire sur {{ rentals.title }}{% endblock %}

{% block body %}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <div class="contentMargin d-flex flex-column align-items-center justify-content-center gap-4">
        <h1>Modification d'un commentaire sur {{ rentals.title }}</h1>
        <div class="bg-darkGrey p-4 rounded-4 w-25">
            {{ form_start(form) }}
            {{ form_row(form.content) }}
            {{ form_widget(form.rating, {'attr': {'style': 'display: none'}}) }}

            <div class="d-flex flex-column">
                <div class="rating- mb-2">
                    <p class="mb-2">Note de la location</p>
                    <div class="star-rating animated-stars">
                        <input type="radio" id="star5" name="comment[rating]" value="5">
                        <label for="star5" class="bi bi-star-fill"></label>
                        <input type="radio" id="star4" name="comment[rating]" value="4">
                        <label for="star4" class="bi bi-star-fill"></label>
                        <input type="radio" id="star3" name="comment[rating]" value="3">
                        <label for="star3" class="bi bi-star-fill"></label>
                        <input type="radio" id="star2" name="comment[rating]" value="2">
                        <label for="star2" class="bi bi-star-fill"></label>
                        <input type="radio" id="star1" name="comment[rating]" value="1">
                        <label for="star1" class="bi bi-star-fill"></label>
                    </div>
                </div>

                <button class="btn-outline-yellow" type="submit">Envoyer</button>
            </div>
            {{ form_end(form) }}
        </div>
    </div>

    <script>
        document.querySelectorAll('.star-rating:not(.readonly) label').forEach(star => {
            star.addEventListener('click', function() {
                this.style.transform = 'scale(1.2)';
                setTimeout(() => {
                    this.style.transform = 'scale(1)';
                }, 200);
            });
        });
        document.querySelectorAll('.star-rating input[type="radio"]').forEach(star => {
            star.addEventListener('change', function () {
                // Met à jour la valeur du champ caché Symfony
                const ratingInput = document.getElementById("comment_rating");
                ratingInput.value = this.value;
            });
        });
    </script>


{% endblock %}
